<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Fri Nov 22 2024 23:26:51 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="6738dd147434df4803f32f7d" data-wf-site="671a91359e3597b13381098d">
<head>
  <meta charset="utf-8">
  <title>Wrapped</title>
  <meta content="Wrapped" property="og:title">
  <meta content="Wrapped" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  {% load static %}
  <link rel="stylesheet" href="{% static 'normalize-wrapped.css' %}">
  <link rel="stylesheet" href="{% static 'webflow-wrapped.css' %}">
  <link rel="stylesheet" href="{% static 'spotify-wrapped-single.webflow.css' %}">
  <link rel="stylesheet" href="{% static 'styling-wrapped.css' %}">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Varela Round:400","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="{% static 'images/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
  <link href="{% static 'images/webclip.png' %}" rel="apple-touch-icon">
</head>
<body class="body-8">
  <div class="navbar-logo-center">
    <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-logo-center-container shadow-three w-nav">
      <div class="navbar-wrapper-three">
        <ul role="list" class="nav-menu-block-2 w-list-unstyled">
          <li>
            <a href="{% url 'contact_developers' %}" class="nav-link-2">Contact Us</a>
          </li>
          <li>
            <a href="{% url 'wrapped:invite' %}" class="nav-link-2">Invite</a>
          </li>
          <li>
            <div data-hover="true" data-delay="0" class="nav-dropdown-2 w-dropdown">
              <div class="nav-dropdown-toggle-2 w-dropdown-toggle">
                <div class="nav-dropdown-icon-2 w-icon-dropdown-toggle"></div>
                <div class="text-block-13">EN</div>
              </div>
              <nav class="nav-dropdown-list-2 shadow-three mobile-shadow-hide w-dropdown-list">
                <a href="#" class="nav-dropdown-link-2 w-dropdown-link">FR</a>
                <a href="#" class="nav-dropdown-link-2 w-dropdown-link">SP</a>
              </nav>
            </div>
          </li>
        </ul>
        <div class="text-block">[ Wrapped ]</div>
        <section class="flex-block-2">
          <a href="{% url 'wrapped:account' %}" class="button-5 w-button">Button Text</a>
        </section>
        <div class="menu-button-2 w-nav-button"></div>
      </div>
      <div class="menu-button-2 w-nav-button"></div>
    </div>
  </div>
  <div class="div-block-17">
    <div>
      <div class="text-block-16">{{ user_data.display_name }}'s<br>Wrapped<br></div>
             <img class="w-layout-blockcontainer container-7 w-container" src="{{ user_data.images.0.url }}"
                  alt="Profile Picture"/>
    </div>
    <div class="div-block-14">
      <div class="text-block-17">
        {% if selected_time_range == 'short_term' %}
            <h2>This is your Wrapped for the past month.</h2>
        {% elif selected_time_range == 'medium_term' %}
            <h2>This is your Wrapped for the past 6 months.</h2>
        {% elif selected_time_range == 'long_term' %}
            <h2>This is your Wrapped for the past year.</h2>
        {% endif %}
      </div>
    </div>
  </div>
  <section class="section-3">
    <div class="div-block-15">
      <div class="text-block-18">Vibemeter</div>
    </div>
    <div id="w-node-a8aa89f5-f97e-62f7-7808-028ccdcd077c-03f32f7d" class="w-layout-layout quick-stack wf-layout-layout">
      <div id="w-node-f5fcd57c-1b18-4ea5-c562-cb2457096fbd-03f32f7d" class="w-layout-cell"></div>
      <div id="w-node-_51decf29-4233-4b7d-caec-5b525687697c-03f32f7d" class="w-layout-cell">
        <div class="text-block-19">XX F</div>
      </div>
      <div id="w-node-_6be5a1f2-a0e8-0ffc-044c-230ce4b2100c-03f32f7d" class="w-layout-cell">
        <div class="text-block-20">Your mix has <br>[INSERT TEMP]<br>vibes</div>
      </div>
    </div>
  </section>
  <section class="section-4">
    <div class="text-block-21">TOP</div>
    <div class="text-block-22">5</div>
    <div class="text-block-21">TRACKS</div>
  </section>
  <section class="section-5 tracks">
    <div class="top-tracks">
    <button class="play-button" id="play-tracks">Play Top Tracks</button>
        <ol id="track-list" class="ol-track-list">
            <li class="track-list">
                {% if top_tracks.items.0.album.images.0.url %}
                    <div class="track-images">
                        <h3 class="top-tracks-text">Top Tracks</h3>
                        <img src="{{ top_tracks.items.0.album.images.0.url }}" alt="Top Track Picture"
                             class="top-track-image">
                    </div>
                {% endif %}

                <div class="top-tracks-artists">
                    {{ top_tracks.items.0.name }}
                    {% if top_tracks.items.0.artists %}
                        - {{ top_tracks.items.0.artists.0.name }}
                    {% else %}
                        - Unknown Artist
                    {% endif %}
                </div>
            </li>

            {% for track in top_tracks.items|slice:"1:5" %}
                <li class="last-tracks-list">
                    <h2>{{ forloop.counter|add:1 }}.</h2>
                    {% if track.album.images.0.url %}
                            <div class="last-tracks-images">
                                <img src="{{ track.album.images.0.url }}" alt="Album Cover">
                            </div>
                    {% endif %}

                    <div class="last-tracks-artists">
                        {{ track.name }}
                        {% if track.artists %}
                            - {{ track.artists.0.name }}
                        {% else %}
                            Unknown Artist
                        {% endif %}
                    </div>

                    {% if not forloop.first %}
                        <audio class="track-audio">
                            <source src="{{ track.preview_url }}" type="audio/mpeg">
                            Your browser does not support the audio element.
                        </audio>
                    {% endif %}
                </li>
            {% endfor %}
        </ol>
    </div>
  </section>
  <section class="section-4">
    <div class="text-block-23">TOP</div>
    <div class="text-block-24">5</div>
    <div class="text-block-23">ARTISTS</div>
  </section>
  <section class="section-5 artists">
      <button class="play-button" id="play-artist-songs">Play Top Artist Songs</button>
        {% for artist, preview_url in artist_songs.items %}
            <audio class="artist-audio">
                <source src="{{ preview_url }}" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        {% endfor %}
        <div class="top-artists-list">
            <ul class="top-artists">
                {% if top_artists %}
                    <li class="top-artists">
                        {% if top_artists.items.0.images.0.url %}
                            <div class="top-artist">
                                <h3 class="top-artist">Your Top Artist</h3>
                                <img src="{{ top_artists.items.0.images.0.url }}" alt="Top Artist Picture"
                                        class="top-artist">
                            </div>
                        {% endif %}
                        <div class="top-artist-name">
                            {{ top_artists.items.0.name }}
                        </div>
                    </li>
                    <li>
                        <div class="top-artists">
                            {% for artist in top_artists.items|slice:"1:5" %}
                                <div class="next-top-artists-list">
                                    <div class="top-artists-images">
                                        <div class="numbered-artists">{{ forloop.counter }}</div>
                                        {% if artist.images.0.url %}
                                            <img src="{{ artist.images.0.url }}" alt="Artist Picture"
                                                 class="top-artists">
                                        {% endif %}
                                    </div>
                                    <div class="top-artists-names">
                                        {{ artist.name }}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </li>
                {% else %}
                    <p>No top artists available.</p>
                {% endif %}
            </ul>
        </div>
  </section>
  <section class="section-6">
    <div class="text-block-25">FAVORITE</div>
    <div class="text-block-25">GENRE</div>
  </section>
  <section class="section-5 genres">
        <button class="play-button" id="play-genre-songs">Play Top Genre Songs</button>
        <div class="genre-list">
            <h3 class="top-genre-title">Your Top Genre:</h3>
            {% if top_genres %}
                <h3 class="genre-title">{{ top_genres.0 }}</h3>
            {% else %}
                <p class="genre-title">No top genres available.</p>
            {% endif %}
        </div>
        
        <div class="genre-grid">
            {% if top_genres %}
                {% for genre in top_genres|slice:":5" %}
                    {% if forloop.counter > 1 %}
                        <div class="numbered-genre-list">
                            <span class="numbered-genre-list">{{ forloop.counter }}</span>
                            <p class="numbered-genre-list">{{ genre }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            {% else %}
                <p class="no-genres">No top genres available.</p>
            {% endif %}
        </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=671a91359e3597b13381098d" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{% static 'webflow-wrapped.js' %}" type="text/javascript"></script>
<script>
    // Function to play and stop audio based on visibility of the slide
function playAudioOnSlide(slideIndex, tracksSelector) {
    const slide = document.querySelectorAll('.slide')[slideIndex]; // Get the slide at the specific index
    const audios = slide.querySelectorAll(tracksSelector); // Get the audio elements inside the slide
    let index = 0;

    // Play next track function
    function playNext() {
        if (index < audios.length) {
            audios[index].play().then(() => {
                audios[index].onended = function() {
                    index++;
                    playNext(); // Continue playing next track when the current track ends
                };
            }).catch(err => {
                console.error('Error playing audio:', err);
                index++;
                playNext(); // Skip to next track if there's an error
            });
        }
    }

    // Stop all audios
    function stopAudio() {
        audios.forEach(audio => {
            audio.pause();
            audio.currentTime = 0; // Reset the audio to the beginning
        });
    }

    // Set up Intersection Observer to trigger playback when the slide is in view and stop when out of view
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) { // If the slide is visible
                playNext();
            } else { // If the slide is no longer visible
                stopAudio();
            }
        });
    }, { threshold: 0.5 }); // Trigger when 50% of the slide is visible

    observer.observe(slide); // Start observing the slide
}

// Automatically play top tracks when the slide becomes visible
playAudioOnSlide(3, '.track-audio'); // Slide index 3 is where the top tracks are
// Automatically play top artist songs when the slide becomes visible
playAudioOnSlide(5, '.artist-audio'); // Slide index 5 is where the top artists are
// Automatically play top genre songs when the slide becomes visible
playAudioOnSlide(7, '.genre-audio'); // Slide index 7 is where the top genres are

</script>
</body>
</html>
