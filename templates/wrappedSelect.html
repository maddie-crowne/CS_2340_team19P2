<!DOCTYPE html>
{% load i18n %}
<html data-wf-page="672d16e7d0d96fcd897e6294" data-wf-site="671a91359e3597b13381098d"
      lang="{% get_current_language as language_code %}">
<head>
    <meta charset="utf-8">
    <title>{% trans "Welcome" %}</title>
    <title>{% trans "Welcome" %}</title>
    <meta content="{% trans 'Welcome' %}" property="og:title">
    <meta content="{% trans 'Welcome' %}" property="twitter:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    {% load static %}
    <link rel="stylesheet" href="{% static 'normalize-select.css' %}">
    <link rel="stylesheet" href="{% static 'webflow-select.css' %}">
    <link rel="stylesheet" href="{% static 'spotify-wrapped-select.webflow.css' %}">
    <link rel="stylesheet" href="{% static 'styling-select.css' %}">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({google: {families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic", "Varela Round:400"]}});</script>
    <script type="text/javascript">!function (o, c) {
        var n = c.documentElement, t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
    }(window, document);</script>
    <script src='{% static 'js/logout.js' %}'></script>
    <link href="{% static 'images/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
    <link href="{% static 'images/webclip.png' %}" rel="apple-touch-icon">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            // Toggle dropdown when clicking the toggle button
            $('.w-dropdown-toggle').click(function (event) {
                $(this).closest('.w-dropdown').toggleClass('open');
                event.stopPropagation();  // Prevents the click from propagating to the document
            });

            // Close the dropdown when clicking outside
            $(document).click(function (event) {
                if (!$(event.target).closest('.w-dropdown').length) {
                    // If the click was outside the dropdown, close it
                    $('.w-dropdown').removeClass('open');
                }
            });

            // Prevent closing the dropdown when clicking inside the dropdown
            $('.w-dropdown').click(function (event) {
                event.stopPropagation();  // Prevents click inside the dropdown from closing it
            });
        });
    </script>

    <!-- Custom CSS to show language dropdown -->
    <style>
        .w-dropdown-list {
            display: none;
        }

        .w-dropdown.open .w-dropdown-list {
            display: block;
        }
    </style>
</head>

<body class="body-5">
<div class="navbar-logo-center">
    <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease"
         role="banner" class="navbar-logo-center-container shadow-three w-nav">
        <div class="navbar-wrapper-three">
            <ul role="list" class="nav-menu-block-2 w-list-unstyled">
                <li>
                    <a href="{% url 'wrapped:contact_developers' %}" class="nav-link-2">Contact Us</a>
                </li>
                <li>
                    <a href="{% url 'wrapped:invite' %}" class="nav-link-2">Invite</a>
                </li>
                <li>
                    <div data-hover="true" data-delay="0" class="nav-dropdown-2 w-dropdown">
                        <div class="nav-dropdown-toggle-2 w-dropdown-toggle">
                            <div class="nav-dropdown-icon-2 w-icon-dropdown-toggle"></div>
                            <div class="text-block-13">
                                {% get_current_language as language_code %}
                                {{ language_code|upper }}
                            </div>
                        </div>
                        <nav class="nav-dropdown-list-2 shadow-three mobile-shadow-hide w-dropdown-list">
                            <!-- Language switch form -->
                            <form action="{% url 'set_language' %}" method="POST">
                                {% csrf_token %}
                                <button type="submit" name="language" value="en"
                                        class="nav-dropdown-link-2 w-dropdown-link">EN
                                </button>
                                <button type="submit" name="language" value="es"
                                        class="nav-dropdown-link-2 w-dropdown-link">ES
                                </button>
                                <button type="submit" name="language" value="fr"
                                        class="nav-dropdown-link-2 w-dropdown-link">FR
                                </button>
                            </form>
                        </nav>
                    </div>
                </li>
            </ul>
            <div class="text-block">[ Wrapped ]</div>
            <section class="flex-block-2">
                <a href="{% url 'wrapped:account' %}" class="button-5 w-button">Button Text</a>
            </section>
            <div class="menu-button-2 w-nav-button"></div>
        </div>
        <div class="menu-button-2 w-nav-button"></div>
    </div>
</div>

<section class="frame-8">
    <div class="w-layout-vflex flex-block-4">
        <div data-delay="0" class="dropdown w-dropdown">
            <div class="dropdown-toggle w-dropdown-toggle">
                <div class="text-block-12">
                    {% trans "Welcome" %} {{ user.username }},<br>{% trans "see your Wrapped from" %}<br>
                </div>
            </div>
            <form method="GET" action="{% url 'wrapped:wrapped' %}" class="select-time">
                <select name="time_range" class="dropdown-native select-time" onchange="this.form.submit();">
                    <!-- Placeholder option -->
                    <option value="" disabled {% if not selected_time_range %}selected{% endif %}>
                        {% trans "[Select]" %}
                    </option>
                    <!-- Actual time ranges-->
                    <option value="short_term" {% if selected_time_range == 'short_term' %}selected{% endif %}>
                        {% trans "Last Month" %}
                    </option>
                    <option value="medium_term" {% if selected_time_range == 'medium_term' %}selected{% endif %}>
                        {% trans "The Last 6 Months" %}
                    </option>
                    <option value="long_term" {% if selected_time_range == 'long_term' %}selected{% endif %}>
                        {% trans "Last Year" %}
                    </option>
                </select>
            </form>
        </div>
    </div>
</section>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=671a91359e3597b13381098d"
        type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
<script src="../wrapped/static/webflow-select.js" type="text/javascript"></script>
</body>
</html>
